ALTER TABLE users
  ADD COLUMN verification_status ENUM('pending','approved','rejected') NOT NULL DEFAULT 'pending' AFTER role;

ALTER TABLE users
  ADD COLUMN verified_at TIMESTAMP NULL DEFAULT NULL AFTER verification_status;

ALTER TABLE users
  ADD COLUMN verified_by VARCHAR(100) NULL AFTER verified_at;

ALTER TABLE users
  ADD COLUMN rejected_at TIMESTAMP NULL DEFAULT NULL AFTER verified_by;

ALTER TABLE users
  ADD COLUMN rejected_reason VARCHAR(255) NULL AFTER rejected_at;

ALTER TABLE users
  ADD INDEX idx_users_verification_status (verification_status);

UPDATE users
SET verification_status = 'approved',
    verified_at = NOW(),
    verified_by = 'migration'
WHERE verification_status = 'pending';